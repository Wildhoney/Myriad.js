/*! myriad.js by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-01-09 */
!function(a,b){"use strict";var c=function(a){if("undefined"==typeof _)throw"Myriad.js requires Underscore.js: http://underscorejs.org/";if("undefined"==typeof a.model||"object"!=typeof a.model)throw"Option `model` should be an instance of Object.";if("undefined"==typeof a.invoke||"function"!=typeof a.invoke)throw"Option `invoke` should be an instance of Function.";this._methods=[],this._properties=[],this._options={},this._options=a;for(var b in a.model)if(a.model.hasOwnProperty(b)){if(_.contains(this._options.blacklist||[],typeof a.model[b]))continue;this._properties.push(b)}return this._setup(this._properties),this._methods};c.prototype={_methods:[],_properties:[],_options:{},_defaultLevels:3,_setup:function(a){for(var b=0,c=a.length;c>b;b++)this._addIteration([a[b]],1)},_addIteration:function(a){var b=_.difference(this._properties,a);b.length&&_.forEach(b,_.bind(function(b){var c=_.clone(a);1===a.length&&this._createMethod(_.clone(c)),c.push(b),this._createMethod(c),c.length<(this._options.levels||this._defaultLevels)&&this._addIteration(c)},this))},_createMethod:function(a){var b=[];_.forEach(a,function(a){b.push(a.charAt(0).toUpperCase()+a.slice(1))});var c=(this._options.prefix||"getBy")+b.join("And");this._methods[c]=_.bind(function(b){b=Array.prototype.slice.apply(arguments),this._options.invoke.apply(this._options.scope||{},[].concat([a],b))},this)}},b&&(b.Myriad=c),b||(a.exports=c)}("undefined"!=typeof module?module:{},"undefined"!=typeof window?window:{});