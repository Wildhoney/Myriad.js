/*! myriad.js by Adam Timberlake <adam.timberlake@gmail.com> created on 2014-01-17 */
!function(a,b){"use strict";var c=b?b._:void 0;if(a)try{c=require("underscore")}catch(d){console.error("Myriad.js requires Underscore.js: http://underscorejs.org/")}var e=function(a,b,d){if(console.time("Myriad"),setTimeout(function(){console.timeEnd("Myriad")},1),"undefined"==typeof c)throw"Myriad.js requires Underscore.js: http://underscorejs.org/";if("undefined"==typeof a||"object"!=typeof a)throw"Option `model` should be an instance of Object.";if("undefined"==typeof b||"function"!=typeof b)throw"Option `invoke` should be an instance of Function.";this._methods=[],this._properties=[],d&&!c.isObject(d.alias)&&delete d.alias,this._callback=b,this._options=d;for(var e in a)if(a.hasOwnProperty(e)){if(c.contains(this._options.ignore||[],typeof a[e]))continue;this._properties.push(e)}return this._setup(this._properties),this._methods};e.prototype={_callback:null,_methods:[],_properties:[],_options:{},_defaultDepth:3,_defaultConnector:"And",_setup:function(a){for(var b=0,c=a.length;c>b;b++)this._addIteration([a[b]])},_addIteration:function(a){var b=c.difference(this._properties,a);b.length&&c.forEach(b,c.bind(function(b){var d=c.clone(a);1===a.length&&this._createMethod(c.clone(d)),d.push(b),this._createMethod(d),d.length<(this._options.depth||this._defaultDepth)&&this._addIteration(d)},this))},_createMethod:function(a){var b=[];c.forEach(a,function(a){b.push(a.charAt(0).toUpperCase()+a.slice(1))});var d=this._options.connector||this._defaultConnector,e=this._options.prefix||"getBy",f=e+b.join(d);this._methods[f]=c.bind(function(b){b=Array.prototype.slice.apply(arguments),this._callback.apply(null,[].concat([a],b))},this),this._options.alias&&(this._options.alias[f]=this._methods[f])}},b&&(b.Myriad=e),a&&(a.exports=e)}("undefined"!=typeof module?module:null,"undefined"!=typeof window?window:null);